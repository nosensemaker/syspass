INSTALANDO O SYSPASS NO UBUNTU 22.04

# instale o apache2 e o mariadb
  $ apt-get install apache2 mariadb-server -y
# instale os pacotes
  $ apt install software-properties-common ca-certificates lsb-release apt-transport-https
# adicione o repositorio
  $ add-apt-repository ppa:ondrej/php
# instale os pacotes
  $ apt install libapache2-mod-php7.4 php7.4 php7.4-mysqli php7.4-pdo php7.4 php7.4-cgi php7.4-cli php7.4-common php7.4-gd php7.4-json php7.4-readline php7.4-curl php7.4-intl php7.4-ldap php7.4-xml php7.4-mbstring git -y
vim /etc/php/7.4/apache2/php.ini

# reinicia o pacote
  $ systemctl restart apache2

# faça a configuração do mariadb
  $ mysql_secure_installation

# logue no banco de dados
  $ mysql -u root -p
# crie a database
  $ create database syspassdb;
# conceda as permissões para o usuario criado - syspassuser -> o identified cria o usuario
  $ grant all privileges on syspassdb.* to syspassuser@localhost identified by "password";
# pra ter certeza que tem as permissões
  $ grant all privileges on syspassdb.* to 'syspassuser'@'localhost'
# de o flush
  $ flush privileges;
# saia
  $ exit;
# clone o repositorio do github do syspass
  $ git clone https://github.com/nuxsmin/sysPass.git
# mova o syspass para o novo diretorio
  $ mv sysPass /var/www/html/syspass
# mude o dono do diretorio
  $ chown -R www-data:www-data /var/www/html/syspass
# mude as permissões 
  $ chmod 750 /var/www/html/syspass/app/{config,backup}
# crie um script de instalação do composer
  $ vim /var/www/html/syspass/install-composer.sh

# Cole esse conteúdo no arquivo install-composer.sh

#!/bin/sh
EXPECTED_SIGNATURE="$(wget -q -O - https://composer.github.io/installer.sig)"
php -r "copy('https://getcomposer.org/installer', 'composer-setup.php');"
ACTUAL_SIGNATURE="$(php -r "echo hash_file('sha384', 'composer-setup.php');")"

if [ "$EXPECTED_SIGNATURE" != "$ACTUAL_SIGNATURE" ]
then
    >&2 echo 'ERROR: Invalid installer signature'
    rm composer-setup.php
    exit 1
fi

php composer-setup.php --quiet
RESULT=$?
rm composer-setup.php
exit $RESULT

# mude o diretorio
  $ cd /var/www/html/syspass/
# rode o scrip 
  $ sh install-composer.sh
# instale
  $ php composer.phar install --no-dev
# faça o arquivo de configuração
  $ vim /etc/apache2/sites-available/syspass.conf

<VirtualHost *:80>
ServerAdmin admin@example.com
DocumentRoot "/var/www/html/syspass"
ServerName syspass.example.com
<Directory "/var/www/html/syspass/">
Options MultiViews FollowSymlinks
AllowOverride All
Order allow,deny
Allow from all
</Directory>
TransferLog /var/log/apache2/syspass_access.log
ErrorLog /var/log/apache2/syspass_error.log
</VirtualHost>

# roda os comandos
  $ a2ensite syspass
  $ systemctl restart apache2
  $ systemctl status apache2
